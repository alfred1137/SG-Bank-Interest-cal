<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimal Fund Allocation</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="src/output.css">
</head>
<body class="bg-ctp-bg text-ctp-text">
    <header class="bg-ctp-surface shadow-md">
        <div class="container mx-auto px-6 py-4">
            <h1 class="text-2xl font-bold text-ctp-primary">Singapore Savings Account Optimizer</h1>
            <p class="text-ctp-subtext">Maximize your monthly interest by optimally allocating your funds across high-interest savings accounts.</p>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Scrolling Workspace -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Card 1: Total Funds -->
                <div class="bg-ctp-surface p-8 rounded-xl shadow-lg text-center border border-ctp-overlay/5">
                    <label for="totalFunds" class="block text-xl font-bold text-ctp-subtext mb-3">Total Funds to Allocate (SGD)</label>
                    <input type="number" id="totalFunds" value="250000" min="0" class="w-full max-w-sm mx-auto p-4 bg-ctp-bg border-2 border-ctp-mantle rounded-lg text-ctp-text text-3xl font-mono text-center focus:ring-ctp-primary focus:border-ctp-primary transition duration-200" placeholder="e.g., 100000">
                </div>

                <!-- Card 2: UOB One -->
                <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">UOB One Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-12-01</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="uobToggle" name="uobAccountStatus" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                    <div id="uobConditions" class="space-y-4">
                        <div class="space-y-1">
                            <span class="text-[10px] uppercase font-bold text-ctp-accent tracking-wider ml-1">Minimum qualifying requirement</span>
                            <label class="checkbox-option"><input type="checkbox" id="uobSpendToggle" name="uobSpendToggle" checked><span>Min. S$500 card spend</span></label>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="checkbox-option"><input type="checkbox" name="uobCondition" value="giro"><span>3 GIRO debits</span></label>
                            <label class="checkbox-option"><input type="checkbox" name="uobCondition" value="salary" checked><span>Salary Credit</span></label>
                        </div>
                    </div>
                </div>

                <!-- Card 3: UOB Stash -->
                <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">UOB Stash Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-08-05</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="uobStashToggle" name="uobStashAccountStatus" class="sr-only peer">
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                    <div id="uobStashConditions" class="space-y-1">
                        <span class="text-[10px] uppercase font-bold text-ctp-accent tracking-wider ml-1">Minimum qualifying requirement</span>
                        <label class="checkbox-option">
                            <input type="checkbox" id="uobStashMabToggle" name="uobStashMabToggle" checked>
                            <span>Maintain previous month's Minimum Average Balance (MAB)</span>
                        </label>
                    </div>
                </div>

                <!-- Card 4: SC Bonus$aver -->
                <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">SC Bonus$aver Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-08-04</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="scToggle" name="scAccountStatus" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                    <div id="scConditions" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="checkbox-option"><input type="checkbox" name="scCondition" value="salary_credit" checked><span>Salary Credit (min. S$3k)</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="scCondition" value="card_spend"><span>Card Spend (min. S$1k)</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="scCondition" value="insure"><span>Insure (min. S$2k premium)</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="scCondition" value="invest"><span>Invest (min. S$20k)</span></label>
                    </div>
                </div>

                 <!-- Card 5: OCBC 360 -->
                 <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">OCBC 360 Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-08-05</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="ocbc360Toggle" name="ocbc360AccountStatus" class="sr-only peer">
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                    <div id="ocbc360Conditions" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="checkbox-option"><input type="checkbox" name="ocbc360Condition" value="salary" checked><span>Salary Credit (min. S$1.8k)</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="ocbc360Condition" value="save" checked><span>Save (increase balance by S$500)</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="ocbc360Condition" value="insure"><span>Insure</span></label>
                        <label class="checkbox-option"><input type="checkbox" name="ocbc360Condition" value="invest"><span>Invest</span></label>
                    </div>
                </div>

                 <!-- Card 6: DBS Multiplier -->
                 <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">DBS Multiplier Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-08-04</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="dbsToggle" name="dbsAccountStatus" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                    <div id="dbsConditionsWrapper" class="space-y-6">
                        <div>
                            <p class="text-sm font-semibold text-ctp-subtext mb-3">1. Number of categories met (excluding Income):</p>
                            <div class="grid grid-cols-3 gap-2">
                                <label class="radio-tab">
                                    <input type="radio" name="dbsCatCount" value="1" class="sr-only" checked>
                                    <span class="tab-label">1 Category</span>
                                </label>
                                <label class="radio-tab">
                                    <input type="radio" name="dbsCatCount" value="2" class="sr-only">
                                    <span class="tab-label">2 Categories</span>
                                </label>
                                <label class="radio-tab">
                                    <input type="radio" name="dbsCatCount" value="3" class="sr-only">
                                    <span class="tab-label">3+ Categories</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <p class="text-sm font-semibold text-ctp-subtext mb-3">2. Total monthly transactions (Income + Categories):</p>
                            <div class="space-y-2">
                                <div class="space-y-1">
                                    <span class="text-[10px] uppercase font-bold text-ctp-accent tracking-wider ml-1">Minimum qualifying requirement</span>
                                    <label class="toggle-option">
                                        <input type="radio" name="dbsVolume" value="500_to_15000" checked>
                                        <div class="flex flex-col">
                                            <span class="font-medium">≥ S$500 to &lt; S$15k</span>
                                            <span class="text-[10px] text-ctp-subtext uppercase" id="dbsRatePreview1">Cap S$50,000.00</span>
                                        </div>
                                    </label>
                                </div>
                                <label class="toggle-option">
                                    <input type="radio" name="dbsVolume" value="15000_to_30000">
                                    <div class="flex flex-col">
                                        <span class="font-medium">≥ S$15k to &lt; S$30k</span>
                                        <span class="text-[10px] text-ctp-subtext uppercase" id="dbsRatePreview2">Cap S$50,000.00</span>
                                    </div>
                                </label>
                                <label class="toggle-option">
                                    <input type="radio" name="dbsVolume" value="30000_plus">
                                    <div class="flex flex-col">
                                        <span class="font-medium">≥ S$30k</span>
                                        <span class="text-[10px] text-ctp-subtext uppercase" id="dbsRatePreview3">Cap S$50,000.00</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 7: CIMB FastSaver -->
                <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                    <div class="flex items-center justify-between">
                        <div class="flex flex-col">
                            <h2 class="text-xl font-semibold text-ctp-primary">CIMB FastSaver Account</h2>
                            <span class="text-[10px] text-ctp-subtext italic">Last updated: 2025-08-05</span>
                        </div>
                        <label class="flex items-center cursor-pointer">
                            <span class="mr-3 text-sm font-medium text-ctp-text">Include Account</span>
                            <div class="relative">
                                <input type="checkbox" id="cimbToggle" name="cimbCondition" value="has_account" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-ctp-overlay rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-ctp-primary"></div>
                            </div>
                        </label>
                    </div>
                </div>

            </div>

            <!-- Right Sticky Scoreboard -->
            <div class="relative">
                <div id="sticky-panel" class="sticky top-8 space-y-6">
                    <!-- Hero Section -->
                    <div class="bg-ctp-surface p-8 rounded-xl shadow-lg text-center border border-ctp-overlay/5">
                        <h2 class="text-lg font-medium text-ctp-subtext mb-2">Total Monthly Interest</h2>
                        <p id="monthlyInterest" class="text-5xl font-bold text-ctp-success transition-colors duration-300">S$0.00</p>
                        <p id="annualInterest" class="text-lg text-ctp-primary mt-2 font-semibold">S$0.00 / year</p>
                        <p id="equivalentRate" class="text-md text-ctp-text mt-2">Equivalent 0.00% p.a.</p>
                    </div>

                    <!-- Visual Allocation Chart -->
                    <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                        <h3 class="text-xl font-semibold mb-4 text-ctp-primary">Optimal Allocation</h3>
                        <div class="relative h-64 mx-auto" style="max-width: 300px;">
                            <canvas id="allocationPieChart"></canvas>
                        </div>
                         <div id="allocationResults" class="mt-4 space-y-2">
                            <!-- JS will inject text breakdown here -->
                        </div>
                    </div>

                    <!-- Breakdown Summary -->
                    <div class="bg-ctp-surface p-6 rounded-lg shadow-sm border border-ctp-overlay/5">
                        <h3 class="text-xl font-semibold mb-2 text-ctp-primary">Interest Breakdown</h3>
                        <div id="interestBreakdown" class="space-y-4">
                            <!-- JS will inject accordions here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="mt-32 mb-12 px-6 flex flex-col items-center gap-8">
        <div class="flex gap-4">
            <button 
                id="openAbout"
                class="bg-ctp-surface/80 hover:bg-ctp-surface border border-ctp-overlay/10 px-6 py-2.5 rounded-full transition-all text-ctp-text hover:text-ctp-primary flex items-center gap-2 shadow-lg"
            >
                <i class="fas fa-circle-question text-xs text-ctp-primary"></i>
                <span class="text-[11px] font-bold tracking-wide uppercase">About Project</span>
            </button>
            <button 
                id="openDisclaimer"
                class="bg-ctp-surface/80 hover:bg-ctp-surface border border-ctp-overlay/10 px-6 py-2.5 rounded-full transition-all text-ctp-text hover:text-ctp-primary flex items-center gap-2 shadow-lg"
            >
                <i class="fas fa-circle-info text-xs text-ctp-primary"></i>
                <span class="text-[11px] font-bold tracking-wide uppercase">Legal Disclaimer</span>
            </button>
        </div>

        <div class="max-w-4xl w-full bg-ctp-surface/40 backdrop-blur-lg border border-ctp-overlay/10 rounded-[32px] p-8 md:p-10 flex flex-col items-center gap-6 shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 left-1/2 -translate-x-1/2 w-24 h-1 bg-ctp-primary/40 rounded-full"></div>
            
            <div class="flex flex-col items-center gap-6 text-center">
                <div class="space-y-4 text-ctp-subtext text-[11px] md:text-xs font-medium leading-relaxed max-w-2xl">
                    <p>
                        Data provided by bank official sites (UOB, SC, DBS, CIMB, OCBC). 
                        This tool is for informational purposes only. Always verify latest rates directly with the respective financial institutions.
                    </p>
                    <p>
                        Developed with vibe to create a clear and modern interest optimization experience for those in Singapore.<br />
                        <span class="text-ctp-overlay1 font-mono">v1.0.0</span>
                    </p>
                </div>

                <a 
                    href="https://github.com/alfred1137/SG-Bank-Interest-cal" 
                    target="_blank" 
                    rel="noopener noreferrer"
                    class="bg-ctp-crust/40 hover:bg-ctp-crust/80 border border-ctp-overlay/10 px-6 py-3 rounded-2xl transition-all text-ctp-text flex items-center gap-5 group"
                >
                    <i class="fab fa-github text-[20px] group-hover:scale-110 transition-transform"></i>
                    <div class="text-left">
                        <span class="block text-[10px] font-black uppercase tracking-widest leading-none">Source code</span>
                        <span class="block text-[9px] font-bold text-ctp-subtext group-hover:text-ctp-primary transition-colors uppercase tracking-tighter mt-1">alfred1137 / SG-Bank-Interest-cal</span>
                    </div>
                </a>
            </div>
        </div>
    </footer>

    <!-- About Modal -->
    <div id="aboutModal" class="fixed inset-0 bg-ctp-crust/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-ctp-surface max-w-2xl w-full rounded-xl shadow-2xl border border-ctp-overlay/20 max-h-[90vh] flex flex-col">
            <div class="p-6 border-b border-ctp-overlay/10 flex justify-between items-center">
                <h2 class="text-xl font-bold text-ctp-primary">About This Project</h2>
                <button id="closeAbout" class="text-ctp-subtext hover:text-ctp-text transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6 overflow-y-auto text-ctp-text space-y-6 text-sm leading-relaxed">
                <section class="space-y-2">
                    <h3 class="text-lg font-bold text-ctp-accent">The Mission</h3>
                    <p>Singapore's high-interest savings accounts are fantastic but complex. Between tiered interest rates, spending requirements, and salary credit conditions, it's hard to know exactly where your next dollar should go. This tool was built to solve that "optimization puzzle."</p>
                </section>
                
                <section class="space-y-2">
                    <h3 class="text-lg font-bold text-ctp-accent">How it Works</h3>
                    <p>Under the hood, our allocation engine evaluates every available interest tier across all your selected accounts. It doesn't just fill one bank at a time; it identifies the <strong>globally optimal</strong> distribution that yields the highest total interest for your specific fund amount.</p>
                </section>

                <section class="space-y-2">
                    <h3 class="text-lg font-bold text-ctp-accent">Tech Stack</h3>
                    <ul class="list-disc list-inside space-y-1 text-ctp-subtext">
                        <li>Styled with <strong>Catppuccin</strong> (Macchiato (dark)/Latte (light) flavors)</li>
                        <li>Built with <strong>Tailwind CSS v4</strong></li>
                        <li>Core logic in pure, modular <strong>JavaScript</strong></li>
                        <li>Tested with <strong>Jest</strong> to ensure mathematical accuracy</li>
                    </ul>
                </section>

                <div class="bg-ctp-mantle p-4 rounded-lg border border-ctp-overlay/10 text-xs italic text-ctp-subtext">
                    "Developed with vibe to create a clear and modern interest optimization experience."
                </div>
            </div>
            <div class="p-6 border-t border-ctp-overlay/10 text-right">
                <button id="closeAboutBtn" class="bg-ctp-primary text-ctp-bg px-6 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity">Close</button>
            </div>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimerModal" class="fixed inset-0 bg-ctp-crust/80 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-ctp-surface max-w-2xl w-full rounded-xl shadow-2xl border border-ctp-overlay/20 max-h-[90vh] flex flex-col">
            <div class="p-6 border-b border-ctp-overlay/10 flex justify-between items-center">
                <h2 class="text-xl font-bold text-ctp-primary">Legal Disclaimer</h2>
                <button id="closeDisclaimer" class="text-ctp-subtext hover:text-ctp-text transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="p-6 overflow-y-auto text-ctp-text space-y-4 text-sm leading-relaxed">
                <p><strong>Last Updated: January 20, 2026</strong></p>
                <p>The Singapore Savings Account Optimizer (the "Tool") is provided for informational and educational purposes only. It is intended to provide a general estimation of potential interest earnings based on user-provided inputs and publicly available bank interest rate information.</p>
                <p><strong>Not Financial Advice:</strong> The information provided by this Tool does not constitute financial, investment, or legal advice. You should not rely on the information provided by this Tool as a substitute for professional financial advice.</p>
                <p><strong>Accuracy of Information:</strong> While we strive to keep the information and rates used by this Tool up to date, bank interest rates, terms, and conditions change frequently and without notice. We make no representations or warranties of any kind, express or implied, about the completeness, accuracy, reliability, or suitability of the information provided.</p>
                <p><strong>Bank Terms and Conditions:</strong> All calculations are subject to the specific terms and conditions of each respective bank. Users are responsible for verifying the latest rates and requirements directly with the financial institutions before making any financial decisions.</p>
                <p><strong>Limitation of Liability:</strong> In no event will we be liable for any loss or damage including without limitation, indirect or consequential loss or damage, or any loss or damage whatsoever arising from loss of data or profits arising out of, or in connection with, the use of this Tool.</p>
            </div>
            <div class="p-6 border-t border-ctp-overlay/10 text-right">
                <button id="closeDisclaimerBtn" class="bg-ctp-primary text-ctp-bg px-6 py-2 rounded-lg font-semibold hover:opacity-90 transition-opacity">I Understand</button>
            </div>
        </div>
    </div>

    <!-- Floating Theme Toggle -->
    <button id="themeToggle" class="fixed bottom-6 right-6 p-4 rounded-full bg-ctp-primary text-ctp-bg shadow-2xl hover:scale-110 transition-all duration-300 z-[100] border-2 border-ctp-crust/10 group" title="Toggle Theme">
        <i class="fas fa-moon dark:hidden text-xl group-hover:rotate-12 transition-transform"></i>
        <i class="fas fa-sun hidden dark:block text-xl group-hover:rotate-45 transition-transform"></i>
    </button>

    <script type="module" src="src/ui/script.js"></script>
</body>
</html>